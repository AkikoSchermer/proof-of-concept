{% render 'partials/head.liquid' %}

  <main class="container">

  {% comment %} <h2 class="">De mensen van Q42</h2>

                                                                                                                                                              <p class="">Onze mensen noemen we Q'ers. Maar wie zijn dat dan? Die Q'ers die het internet aan het afmaken zijn? Check ze allemaal hieronder.   
                                                                                En wil je ook Q'er worden, scroll dan even voorbij onze hoofden voor de openstaande vacatures!</p> {% endcomment %}


  {% comment %} Eerst in de server loopen door de tags van de mensen en dan pas de frontend {% endcomment %}
  {% comment %} 
                                                                                                                                                                                      <form action="/">
                                                                                                                                                                                        <label for=""></label>
                                                                                                                                                                                        <select>
                                                                                                                                                                                          <option value="">Harry potter fan</option>
                                                                                                                                                                                          <option value="">Partner van de club</option>
                                                                                                                                                                                          <option value="">Front-end</option>
                                                                                                                                                                                        </select>
                                                                                            </form> {% endcomment %}

  <ul class="">
    {% for user in users %}
      <li class="users">
        {% if user.avatars and user.avatars[0] %}
          <picture>
              {% comment %} <source type="image/avif" srcset="{{ user.avatars[0] }}&format=avif">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  <source type="image/webp" srcset="{{ user.avatars[0] }}&format=webp">  {% endcomment %}
            <img
              src="{{ user.avatars[0] }}"
              alt="profielfoto van {{ user.name }}"
              width="300"
              height="300"
              loading="lazy">
          </picture>
          <div class="text-block">
            <h2>{{ user.name }}</h2>
            <p>{{ user.email }}</p>
          </div>
        {% else %}
          <p>
            Geen afbeelding beschikbaar
          </p>
        {% endif %}
      </li>
    {% endfor %}
  </ul>

  {% for message in messages %}
    <form
      method="POST"
      action="/like/{{ message.id }}"
      class="like-form">
      <button type="submit" class="like-btn">
        <img src="{% if message.likedByCurrentUser %}assets/HeartFilled.svg{% else %}assets/HeartEmpty.svg{% endif %}" alt="Like" />
      </button>
    </form>
  {% endfor %}


  <ul>

    <form
      method="POST"
      action="/mensen-pagina"
      class="message-form">
      <label for="from">Naam:</label>
      <input
        type="text"
        id="from"
        name="from"
        required>

      <label for="text">Reactie:</label>
      <input
        type="text"
        id="text"
        name="text"
        required>

      <button type="submit">verzender</button>
    </form>

    {% comment %} alle berichten tonen 
                                                                                              {% if newMessages %}
                                                                                                {% for message in newMessages %}
                                                                                                  <div class="bericht">
                                                                                                    <p>{{ message.from }}</p>
                                                                                                    <p>{{ message.text }}</p>
                                                                                                  </div>
                                                                                                {% endfor %}
                                                                                              {% else %}
                                                                                                <p>Geen nieuwe berichten</p>
                                                                {% endif %} {% endcomment %}

    {% comment %} alleen de eerste reactie tonen {% endcomment %}
    {% if newMessages.size > 0 %}
      <div class="bericht">
        <p>{{ newMessages[0].from }}</p>
        <p>{{ newMessages[0].text }}</p>
      </div>
    {% else %}
      <p>Geen nieuwe berichten</p>
    {% endif %}


  </ul>
</main>

{% render 'partials/foot.liquid' %}


<script>
  document.querySelectorAll('.like-form').forEach(form => {
  form.addEventListener('submit', function(event) {
    event.preventDefault(); // Voorkomt herladen van de pagina


</script>